安装事项:adminservice和configservice是一个库，portal是一个库，使用不同的Sql
apollo-adminservice-2.3.0-github、apollo-configservice-2.3.0-github、apollo-portal-2.3.0-github
启动顺序：apollo-configservice-2.3.0-github ->apollo-adminservice-2.3.0-github -> apollo-portal-2.3.0-github  
注意事项：configservice的启动端口号为内置Eureka的端口号，也是config库的Eureka的端口号，要一一对应，portal为后台操作网页，它的文件中的要填configservice的启动端口号

和springboot配合的话,需要在配置文件夹下创建一个META_INF文件夹下的app.properties文件,如果想做到热更新,就看ConfigChangeListener类,里面可以写一些自己的逻辑


这里为什么很多配置不放在application命名空间中就没生效？？？
之前的配置：引入的是apollo-client依赖,然后在app.properties中配置了命名空间spring.config.import=apollo://application, apollo://fishAuthService,这是错误的
应该是在application.yml中配置apollo.bootstrap.namespaces




创建fishCoins应用->application命名空间为共用，还有其他命名空间放各自的配置

--命名空间----

--application----

# Eureka 客户端配置
eureka.client.service-url.defaultZone = http://admin:admin@localhost:8900/eureka,http://admin:admin@localhost:8901/eureka
eureka.instance.hostname = localhost

# 日志配置
logging.level.com.pond.build = DEBUG


#------  gateway配置：为什么放在自定义的命名空间中不生效呢？

#表示是否从Eureka Server获取注册信息，默认为true
eureka.client.fetch-registry = true


# 开启网关服务发现和自动路由
spring.cloud.gateway.discovery.locator.enabled = true
spring.cloud.gateway.discovery.locator.lower-case-service-id = true

# 配置第一个路由：转发到 fishBaseService
spring.cloud.gateway.routes[0].id = route-to-fishBaseService
spring.cloud.gateway.routes[0].uri = lb://fishBaseService-9100
spring.cloud.gateway.routes[0].predicates[0] = Path=/base/**
spring.cloud.gateway.routes[0].filters[0] = StripPrefix=1

# 配置第二个路由：转发到 fishServiceApi
spring.cloud.gateway.routes[1].id = route-to-fishServiceApi
spring.cloud.gateway.routes[1].uri = lb://fishServiceApi
spring.cloud.gateway.routes[1].predicates[0] = Path=/api/**
spring.cloud.gateway.routes[1].filters[0] = StripPrefix=1


#------



--fishBaseService----


# Resilience4j 配置
resilience4j.timelimiter.configs.default.timeout-duration = 10s

resilience4j.circuitbreaker.configs.default.failureRateThreshold = 50
resilience4j.circuitbreaker.configs.default.slowCallDurationThreshold = 2s
resilience4j.circuitbreaker.configs.default.slowCallRateThreshold = 30
resilience4j.circuitbreaker.configs.default.slidingWindowType = TIME_BASED
resilience4j.circuitbreaker.configs.default.slidingWindowSize = 2
resilience4j.circuitbreaker.configs.default.minimumNumberOfCalls = 2
resilience4j.circuitbreaker.configs.default.permittedNumberOfCallsInHalfOpenState = 2
resilience4j.circuitbreaker.configs.default.waitDurationInOpenState = 5s
resilience4j.circuitbreaker.configs.default.recordExceptions[0] = java.lang.Exception

resilience4j.circuitbreaker.instances.fishServiceApi.baseConfig = default

# Spring 应用配置
spring.cloud.inetutils.timeout-seconds = 10

configValue = hoolo


--fishServiceApi----


# Spring 应用配置
spring.cloud.inetutils.timeout-seconds = 10



--fishEureka----


#表示当前服务注册到服务中心 默认为true
eureka.client.register-with-eureka = true
#表示是否从Eureka Server获取注册信息，默认为true
eureka.client.fetch-registry = true





